var FieldValidator=function(t){this.options=$.extend({summary:null,listParentEl:null,validators:[],isPopup:!1},t),this.setup()};!function(t){function i(t){return!(!t||0===t.length)&&t.filter(function(t){return t.async?!t.completed||t.isValidResult:!0===t.isValidResult}).length==t.length}function s(t){if(!t||0===t.length)return null;var i=t.filter(function(t){return!1===t.isValidResult});return i.length>0?i[0].errorMsg:""}function o(t,i){t&&(t.removeClass("empty"),t.removeClass("warning"),t.removeClass("check"),!0===i?t.addClass("check"):!1===i?t.addClass("warning"):t.addClass("empty"))}function a(i,s,o){var a=LPTools.createElement("div",{class:"col-1"},null),l=LPTools.createElement("div",{class:"validation-img "+(o?"empty":"")},null);a.appendChild(l);var n=LPTools.createElement("div",{class:"col-11"},null);s&&n.appendChild(s);var e=LPTools.createElement("div",{id:i,class:"row"},null);return e.appendChild(a),e.appendChild(n),{validatorEl:e,stateEl:t(l),msgEl:t(n)}}function l(i,s,o){if(i&&t.isFunction(i)&&!1===o&&s&&s.length>0)for(var a=s.filter(function(t){return!0===t.isValidResult}),l=0;l<a.length;l++)i(a.errorMsg)}FieldValidator.prototype.setup=function(){return this.setupSummary(),this.setupValidatorList(),this.isValid=!0,this},FieldValidator.prototype.setupSummary=function(){if(this.options.summary&&this.options.validators&&this.options.validators.length>0){var t=a(this.options.summary.id,this.options.summary.errorMsg,!1);this.options.summary.stateEl=t.stateEl,this.options.summary.msgEl=t.msgEl,this.options.summary.parentEl.empty(),this.options.summary.parentEl.append(t.validatorEl),this.options.summary.parentEl.hide()}},FieldValidator.prototype.setupValidatorList=function(){if(this.options.listParentEl){for(var t=LPTools.createElement("div",null,null),i=0;i<this.options.validators.length;i++){var s=a(this.options.validators[i].id,this.options.validators[i].name,!0);s&&(this.options.validators[i].stateEl=s.stateEl,t.appendChild(s.validatorEl))}this.options.listParentEl.empty(),this.options.listParentEl.append(t)}},FieldValidator.prototype.updateStateList=function(){if(this.options.validators&&this.options.validators.length>0)for(var t=0;t<this.options.validators.length;t++)o(this.options.validators[t].stateEl,this.options.validators[t].isValidResult)},FieldValidator.prototype.updateStateSummary=function(t){this.options.summary&&this.options.validators&&this.options.validators.length>0&&(!1===t?(o(this.options.summary.stateEl,t),this.options.summary.msgEl.empty(),this.options.summary.msgEl.append(s(this.options.validators)),this.options.summary.parentEl.show(),this.options.summary.labelEl&&this.options.summary.labelEl.hide()):this.options.summary.parentEl.is(":visible")&&(this.options.summary.parentEl.hide(),this.options.summary.labelEl&&this.options.summary.labelEl.show()))},FieldValidator.prototype.getValidationList=function(){var t=[];if(this.options.validators)for(var i=0;i<this.options.validators.length;i++)this.options.validators[i].isValidResult||t.push(this.options.validators[i].id);return t},FieldValidator.prototype.validate=function(t,s,o){function a(){e=i(n.options.validators),o||n.updateStateSummary(e),n.updateStateList(),l(s,n.options.validators,e)}var n=this,e=!1;if(t&&this.options.validators&&0!==this.options.validators.length){try{for(var r=0;r<this.options.validators.length;r++)this.options.validators[r].async?(this.options.validators[r].completed=!1,this.options.validators[r].isValidAsync(t,function(t){return function(i){n.options.validators[t].completed=!0,n.options.validators[t].isValidResult=i,a()}}(r))):this.options.validators[r].isValidResult=this.options.validators[r].isValid(t)}catch(t){return console.log("Something went wrong while executing validation: "+t),!1}a()}return this.isValid=e,e}}(jQuery);